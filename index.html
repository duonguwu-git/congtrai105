<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥i Qu·∫ª T∆∞∆°ng Lai Si√™u Dzui 10/5</title>
    <style>
        /* --- GI·ªÆ NGUY√äN CSS G·ªêC --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff5e6; 
            color: #5d4037; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            font-size: 18px;
            line-height: 1.5;
            position: relative;
            overflow-x: hidden;
        }
        .container {
            width: 100%;
            max-width: 450px;
            background: rgba(255, 245, 230, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 20px rgba(93, 64, 55, 0.2);
        }
        h1, h2 { color: #c0392b; margin-bottom: 10px; }
        button {
            background: #ffd700; 
            color: #5d4037;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            margin: 10px 0;
            font-weight: bold;
            width: 100%;
        }
        button:hover { transform: scale(1.02); }
        input[type="date"] {
            padding: 12px;
            font-size: 18px;
            border: 2px solid #c0392b;
            border-radius: 10px;
            margin: 20px 0;
            width: 100%;
        }
        
        .screen { display: none; opacity: 0; transition: opacity 0.5s ease-in-out; }
        .active { display: block; opacity: 1; }

        #jar {
            width: 160px; height: 230px;
            background: linear-gradient(#8b4513, #d2691e);
            border: 8px solid #5d4037;
            border-radius: 20px 20px 50px 50px;
            margin: 20px auto;
            position: relative;
        }
        .shaking { animation: shake-strong 0.1s infinite; }
        @keyframes shake-strong {
            0% { transform: translate(0,0) rotate(0deg); }
            25% { transform: translate(-5px,-5px) rotate(-5deg); }
            50% { transform: translate(5px, 5px) rotate(5deg); }
            100% { transform: translate(0,0) rotate(0deg); }
        }

        .sticks-container { display: flex; justify-content: center; align-items: flex-end; height: 150px; margin: 20px 0; }
        .stick {
            width: 20px; height: 120px; background-color: #8b4513; margin: 0 5px;
            cursor: pointer; border-radius: 5px 5px 0 0;
        }
        .stick.selected { transform: translateY(-50px); background-color: #c0392b; }
        .stick.disabled { opacity: 0.2; pointer-events: none; }

        /* B·∫¢NG CHECK-IN */
        #result-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; justify-content: center;
            align-items: center; z-index: 2000; padding: 15px;
        }
        #checkin-board {
            background: #fff; border: 3px solid #c0392b; padding: 20px;
            border-radius: 15px; margin-bottom: 20px; width: 100%;
        }
        .ad-banner {
            background: #c0392b; color: white; padding: 10px;
            border-radius: 8px; font-weight: bold; font-size: 14px;
            margin-top: 15px;
        }
        #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 2500; }
    </style>
</head>
<body>
    <div class="container">
        <div id="screen1" class="screen active">
            <h1>üîÆ B√≥i Qu·∫ª 10/5 üîÆ</h1>
            <p>V·∫≠n m·ªánh nƒÉm 2026 c·ªßa b·∫°n n·∫±m ·ªü ƒë√¢y!</p>
            <button id="confirm1">B·∫ÆT ƒê·∫¶U</button>
        </div>

        <div id="screen2" class="screen">
            <p>M·ªói ng∆∞·ªùi ch·ªâ ƒë∆∞·ª£c gieo qu·∫ª <b>DUY NH·∫§T 1 L·∫¶N</b>. B·∫°n ƒë√£ s·∫µn s√†ng?</p>
            <button id="confirm2">T√îI ƒê√É S·∫¥N S√ÄNG</button>
        </div>

        <div id="screen-birthdate" class="screen">
            <p>Nh·∫≠p ng√†y sinh c·ªßa b·∫°n:</p>
            <input type="date" id="birthdate">
            <button id="cast">Gieo Qu·∫ª Ngay</button>
        </div>

        <div id="screen-jar" class="screen">
            <div id="jar"></div>
            <p>ƒêang k·∫øt n·ªëi v≈© tr·ª•...</p>
        </div>

        <div id="screen-sticks" class="screen">
            <p>R√∫t 1 l√° qu·∫ª ƒë·ªãnh m·ªánh:</p>
            <div class="sticks-container"></div>
        </div>

        <div id="result-modal">
            <div style="max-width: 400px; width: 100%;">
                <div id="checkin-board">
                    <h2 style="font-size: 18px; border-bottom: 2px solid #eee; padding-bottom: 10px;">üìú L√Å S·ªê T∆Ø∆†NG LAI 2026 üìú</h2>
                    <div id="result-display" style="padding: 20px 0;"></div>
                    <div class="ad-banner">
                        üö© ƒê·ªäA ƒêI·ªÇM: TR·∫†I L·ªöP 10/5<br>
                        ü•§ MUA N∆Ø·ªöC NGAY - V·∫¨N MAY S·∫º T·ªöI!
                    </div>
                </div>
                <button id="share-button" style="background: #0084ff; color: white;">üì¢ CHIA S·∫∫ CHECK-IN</button>
                <p style="color: white; font-size: 13px; margin-top: 10px;">(B·∫°n ƒë√£ b√≥i xong, kh√¥ng th·ªÉ b√≥i l·∫°i l·∫ßn 2)</p>
            </div>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        // --- √ÇM THANH ---
        const audios = {
            click: new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'),
            shake: new Audio('https://orangefreesounds.com/wp-content/uploads/2015/07/Dice-shake-sound-effect.mp3'),
            flip: new Audio('https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'),
            win: new Audio('https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3')
        };
        audios.shake.loop = true;

        // --- D·ªÆ LI·ªÜU ---
        const storageKey = 'user_fortune_10_5_final';
        const fortunes = [
            "S·ªë ƒë·ªè nh∆∞ son! Ti·ªÅn v√¥ nh∆∞ n∆∞·ªõc, crush t·ª± ƒë·ªï. Gh√© 10/5 ƒÉn m·ª´ng nh√©!",
            "V·∫≠n ƒë√†o hoa n·ªü r·ªô! Ra ng√µ g·∫∑p ng∆∞·ªùi y√™u, v√†o tr·∫°i 10/5 g·∫∑p tr√† s·ªØa ngon.",
            "Qu√Ω nh√¢n ph√π tr·ª£, h·ªçc h√†nh thƒÉng ti·∫øn. Mua n∆∞·ªõc 10/5 ƒë·ªÉ khai th√¥ng tr√≠ tu·ªá!",
            "C·∫ßn c·∫©n th·∫≠n v√≠ ti·ªÅn, d·ªÖ b·ªã hao h·ª•t. Qua 10/5 mua n∆∞·ªõc gi·∫£i h·∫°n ngay!",
            "T√¨nh duy√™n h∆°i l·∫≠n ƒë·∫≠n, nh∆∞ng ti·ªÅn t√†i th√¨ ·ªïn. U·ªëng n∆∞·ªõc 10/5 cho ƒë·ªùi b·ªõt ƒë·∫Øng.",
            "NƒÉm nay b√¨nh an, s·ª©c kh·ªèe d·ªìi d√†o. Gh√© 10/5 chill c√πng b·∫°n b√® l√† nh·∫•t."
        ];

        // --- KI·ªÇM TRA ƒê√É B√ìI CH∆ØA ---
        window.onload = () => {
            const saved = localStorage.getItem(storageKey);
            if (saved) {
                showFinalResult(JSON.parse(saved), true);
            }
        };

        function getZodiac(day, month) {
            if((month == 1 && day <= 19) || (month == 12 && day >=22)) return "Ma K·∫øt";
            if((month == 1 && day >= 20) || (month == 2 && day <=18)) return "B·∫£o B√¨nh";
            if((month == 2 && day >= 19) || (month == 3 && day <=20)) return "Song Ng∆∞";
            if((month == 3 && day >= 21) || (month == 4 && day <=19)) return "B·∫°ch D∆∞∆°ng";
            if((month == 4 && day >= 20) || (month == 5 && day <=20)) return "Kim Ng∆∞u";
            if((month == 5 && day >= 21) || (month == 6 && day <=21)) return "Song T·ª≠";
            if((month == 6 && day >= 22) || (month == 7 && day <=22)) return "C·ª± Gi·∫£i";
            if((month == 7 && day >= 23) || (month == 8 && day <=22)) return "S∆∞ T·ª≠";
            if((month == 8 && day >= 23) || (month == 9 && day <=22)) return "X·ª≠ N·ªØ";
            if((month == 9 && day >= 23) || (month == 10 && day <=23)) return "Thi√™n B√¨nh";
            if((month == 10 && day >= 24) || (month == 11 && day <=22)) return "B·ªç C·∫°p";
            if((month == 11 && day >= 23) || (month == 12 && day <=21)) return "Nh√¢n M√£";
            return "B√≠ ·∫®n";
        }

        // --- ƒêI·ªÄU H∆Ø·ªöNG ---
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            setTimeout(() => {
                document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
                const t = document.getElementById(id);
                t.style.display = 'block';
                setTimeout(() => t.classList.add('active'), 50);
            }, 500);
        }

        document.getElementById('confirm1').onclick = () => { audios.click.play(); showScreen('screen2'); };
        document.getElementById('confirm2').onclick = () => { audios.click.play(); showScreen('screen-birthdate'); };

        document.getElementById('cast').onclick = () => {
            if(!document.getElementById('birthdate').value) return alert("Vui l√≤ng nh·∫≠p ng√†y sinh!");
            audios.click.play(); showScreen('screen-jar');
            document.getElementById('jar').classList.add('shaking');
            audios.shake.play();

            setTimeout(() => {
                audios.shake.pause();
                showScreen('screen-sticks');
                renderSticks();
            }, 2500);
        };

        function renderSticks() {
            const container = document.querySelector('.sticks-container');
            for(let i=0; i<5; i++) {
                const s = document.createElement('div');
                s.className = 'stick';
                s.onclick = () => {
                    audios.flip.play();
                    s.classList.add('selected');
                    document.querySelectorAll('.stick').forEach(el => el.classList.add('disabled'));
                    
                    const birth = new Date(document.getElementById('birthdate').value);
                    const data = {
                        zodiac: getZodiac(birth.getDate(), birth.getMonth()+1),
                        fortune: fortunes[Math.floor(Math.random()*fortunes.length)],
                        lucky: Math.floor(Math.random()*99)+1
                    };
                    
                    localStorage.setItem(storageKey, JSON.stringify(data));
                    setTimeout(() => showFinalResult(data), 1000);
                };
                container.appendChild(s);
            }
        }

        function showFinalResult(data, isOld = false) {
            document.getElementById('result-display').innerHTML = `
                <p style="color: #e67e22; font-weight: bold; margin-bottom: 10px;">üåü CUNG: ${data.zodiac.toUpperCase()}</p>
                <p style="font-size: 18px; margin-bottom: 15px; padding: 0 10px;">"${data.fortune}"</p>
                <p style="font-weight: bold; color: #c0392b;">S·ªê MAY M·∫ÆN: ${data.lucky}</p>
            `;
            document.getElementById('result-modal').style.display = 'flex';
            if(!isOld) { audios.win.play(); confetti(); }
        }

        // --- CHIA S·∫∫ ---
        document.getElementById('share-button').onclick = () => {
            const text = "Tui v·ª´a b√≥i qu·∫ª t·∫°i tr·∫°i 10/5 n√®! V·∫≠n m·ªánh tui l√†: " + document.getElementById('result-display').innerText + " üëâ Gh√© 10/5 b√≥i th·ª≠ nha!";
            if (navigator.share) {
                navigator.share({ title: 'B√≥i Qu·∫ª 10/5', text: text, url: window.location.href });
            } else {
                navigator.clipboard.writeText(text);
                alert("ƒê√£ copy n·ªôi dung! H√£y d√°n v√†o Messenger ho·∫∑c Nh·∫≠t k√Ω TikTok nh√©.");
            }
        };

        function confetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            const pieces = [];
            for(let i=0; i<100; i++) pieces.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height-canvas.height, c:`hsl(${Math.random()*360},100%,50%)`, s:Math.random()*3+2});
            function draw() {
                ctx.clearRect(0,0,canvas.width,canvas.height);
                pieces.forEach(p => { p.y+=p.s; ctx.fillStyle=p.c; ctx.fillRect(p.x, p.y, 5, 5); });
                if(pieces.length > 0 && pieces[0].y < canvas.height) requestAnimationFrame(draw);
            }
            draw();
        }
    </script>
</body>
</html>
