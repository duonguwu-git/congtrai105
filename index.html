<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥i Qu·∫ª T∆∞∆°ng Lai Si√™u Dzui 10/5 - PRO</title>
    <style>
        /* --- GI·ªÆ NGUY√äN CSS G·ªêC --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff5e6; 
            color: #5d4037; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            font-size: 18px;
            line-height: 1.5;
            position: relative;
            overflow: hidden;
        }
        .container {
            width: 100%;
            max-width: 450px;
            background: rgba(255, 245, 230, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 20px rgba(93, 64, 55, 0.2);
            z-index: 10;
        }
        h1, h2 { color: #c0392b; margin-bottom: 10px; }
        button {
            background: #ffd700; 
            color: #5d4037;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            margin: 10px 0;
            font-weight: bold;
            width: 100%;
        }
        button:hover { transform: scale(1.02); }
        input[type="date"] {
            padding: 12px;
            font-size: 18px;
            border: 2px solid #c0392b;
            border-radius: 10px;
            margin: 20px 0;
            width: 100%;
        }
        
        .screen { display: none; opacity: 0; transition: opacity 0.5s ease-in-out; }
        .active { display: block; opacity: 1; }

        /* --- N√ÇNG C·∫§P HI·ªÜU ·ª®NG L·∫ÆC QU·∫∫ --- */
        #jar-wrapper { position: relative; width: 200px; margin: 0 auto; }
        #jar {
            width: 160px; height: 230px;
            background: linear-gradient(#8b4513, #d2691e);
            border: 8px solid #5d4037;
            border-radius: 20px 20px 50px 50px;
            margin: 20px auto;
            position: relative;
            z-index: 5;
        }
        .mantra {
            position: absolute; color: #c0392b; font-weight: bold; 
            opacity: 0; white-space: nowrap; pointer-events: none;
        }
        .shaking .mantra { animation: fly 1s infinite linear; opacity: 1; }
        @keyframes fly {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
        }

        .shaking { animation: shake-strong 0.1s infinite; }
        @keyframes shake-strong {
            0% { transform: translate(0,0) rotate(0deg); }
            25% { transform: translate(-5px,-5px) rotate(-5deg); }
            50% { transform: translate(5px, 5px) rotate(5deg); }
            100% { transform: translate(0,0) rotate(0deg); }
        }

        .sticks-container { display: flex; justify-content: center; align-items: flex-end; height: 150px; margin: 20px 0; }
        .stick {
            width: 20px; height: 120px; background-color: #8b4513; margin: 0 5px;
            cursor: pointer; border-radius: 5px 5px 0 0; transition: 0.3s;
        }
        .stick:hover { background-color: #c0392b; }
        .stick.selected { transform: translateY(-50px); background-color: #ffd700; border: 2px solid #c0392b; }
        .stick.disabled { opacity: 0.2; pointer-events: none; }

        /* B·∫¢NG CHECK-IN & Mystery Gift */
        #result-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; justify-content: center;
            align-items: center; z-index: 2000; padding: 15px;
        }
        #checkin-board {
            background: #fff; border: 3px solid #c0392b; padding: 20px;
            border-radius: 15px; margin-bottom: 15px; width: 100%;
            position: relative; overflow: hidden;
        }
        .quote-box { font-size: 12px; font-style: italic; color: #7f8c8d; border-top: 1px solid #eee; padding-top: 10px; margin-top: 10px; }
        .ad-banner {
            background: #c0392b; color: white; padding: 10px;
            border-radius: 8px; font-weight: bold; font-size: 14px;
            margin-top: 15px;
        }
        #btn-mystery { background: #ff4757; color: white; font-size: 16px; margin-top: 5px; }
        #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 2500; }
    </style>
</head>
<body>
    <div class="container">
        <div id="screen1" class="screen active">
            <h1>üîÆ B√≥i Qu·∫ª 10/5 üîÆ</h1>
            <p>Kh√°m ph√° b√≠ m·∫≠t v·∫≠n m·ªánh c·ªßa b·∫°n!</p>
            <button id="confirm1">B·∫ÆT ƒê·∫¶U</button>
        </div>

        <div id="screen2" class="screen">
            <p>B·∫°n c√≥ tin v√†o ƒë·ªãnh m·ªánh kh√¥ng? V≈© tr·ª• ƒëang ch·ªù ƒë·ª£i b·∫°n...</p>
            <button id="confirm2">T√îI TIN</button>
        </div>

        <div id="screen-birthdate" class="screen">
            <p>Nh·∫≠p ng√†y sinh ƒë·ªÉ gieo qu·∫ª:</p>
            <input type="date" id="birthdate">
            <button id="cast">Gieo Qu·∫ª Ngay</button>
        </div>

        <div id="screen-jar" class="screen">
            <div id="jar-wrapper">
                <div class="mantra" style="left: -20px;">√öm ma ni...</div>
                <div class="mantra" style="right: -20px;">B√°t di h·ªìng...</div>
                <div id="jar"></div>
            </div>
            <p>ƒêang th·ªânh c·∫ßu v≈© tr·ª•...</p>
        </div>

        <div id="screen-sticks" class="screen">
            <p>Ch·ªçn m·ªôt "m·∫£nh gh√©p" t∆∞∆°ng lai:</p>
            <div class="sticks-container"></div>
        </div>

        <div id="result-modal">
            <div style="max-width: 400px; width: 100%;">
                <div id="checkin-board">
                    <h2 style="font-size: 18px; border-bottom: 2px solid #eee; padding-bottom: 10px;">üìú L√Å S·ªê ƒê·ªäNH M·ªÜNH 2026 üìú</h2>
                    <div id="result-display" style="padding: 15px 0;"></div>
                    <div id="quote-display" class="quote-box"></div>
                    <div class="ad-banner">
                        üö© ƒê·ªäA ƒêI·ªÇM: TR·∫†I L·ªöP 10/5<br>
                        ü•§ TH·ª¨ V·∫¨N MAY - NH·∫¨N NGAY QU√Ä KH·ª¶NG!
                    </div>
                </div>
                <button id="btn-mystery">üéÅ NH·∫¨N L·ªòC B·∫§T NG·ªú</button>
                <button id="share-button" style="background: #0084ff; color: white;">üì¢ CHIA S·∫∫ V·∫¨N MAY</button>
            </div>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        // --- √ÇM THANH ---
        const audios = {
            click: new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'),
            shake: new Audio('https://orangefreesounds.com/wp-content/uploads/2015/07/Dice-shake-sound-effect.mp3'),
            flip: new Audio('https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'),
            win: new Audio('https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3'),
            gift: new Audio('https://assets.mixkit.co/active_storage/sfx/2017/2017-preview.mp3')
        };
        audios.shake.loop = true;

        // --- D·ªÆ LI·ªÜU ---
        const storageKey = 'user_fortune_10_5_ultra';
        const fortunes = [
            "V·∫≠n kh√≠ c·ª±c th·ªãnh! Ti·ªÅn v√¥ nh∆∞ n∆∞·ªõc, t√¨nh duy√™n vi√™n m√£n. Gh√© 10/5 khao b·∫°n b√® ngay!",
            "T∆∞∆°ng lai r·∫°ng ng·ªùi! S·∫Øp c√≥ tin vui b·∫•t ng·ªù t·ª´ ph∆∞∆°ng xa. ƒê·ª´ng qu√™n gh√© 10/5 nh√©.",
            "Qu√Ω nh√¢n ph√π tr·ª£, m·ªçi vi·ªác hanh th√¥ng. U·ªëng n∆∞·ªõc 10/5 ƒë·ªÉ l·∫•y th√™m nƒÉng l∆∞·ª£ng!",
            "C·∫©n th·∫≠n hao t√†i t·ªën c·ªßa, nh∆∞ng n·∫øu gh√© 10/5 gi·∫£i xui th√¨ m·ªçi chuy·ªán s·∫Ω ·ªïn th√¥i.",
            "T√¨nh duy√™n ch·ªõm n·ªü, c√≥ ng∆∞·ªùi ƒëang th·∫ßm th∆∞∆°ng b·∫°n ƒë·∫•y. H√£y t·ª± tin l√™n!",
            "S·ª©c kh·ªèe d·ªìi d√†o, tinh th·∫ßn minh m·∫´n. M·ªôt ly tr√† s·ªØa 10/5 s·∫Ω l√†m ng√†y c·ªßa b·∫°n tuy·ªát h∆°n."
        ];

        const quotes = [
            "V≈© tr·ª• kh√¥ng bao gi·ªù nh·∫ßm l·∫´n, m·ªçi th·ª© x·∫£y ra ƒë·ªÅu c√≥ l√Ω do.",
            "H√¥m nay b·∫°n c∆∞·ªùi, ng√†y mai may m·∫Øn s·∫Ω m·ªâm c∆∞·ªùi v·ªõi b·∫°n.",
            "ƒê·ª´ng ch·ªù ƒë·ª£i c∆° h·ªôi, h√£y t·ª± t·∫°o ra n√≥ (b·∫±ng c√°ch gh√© 10/5).",
            "NƒÉng l∆∞·ª£ng t√≠ch c·ª±c s·∫Ω thu h√∫t nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp.",
            "Cu·ªôc ƒë·ªùi l√† nh·ªØng chuy·∫øn ƒëi, v√† ƒëi·ªÉm d·ª´ng ch√¢n ƒë·∫πp nh·∫•t l√† 10/5."
        ];

        const mysteryGifts = [
            "T·∫∑ng b·∫°n 1 l·ªùi ch√∫c: 'C·∫£ nƒÉm kh√¥ng lo h·∫øt ti·ªÅn'!",
            "Voucher gi·∫£m gi√° 0% (ƒê√πa th√¥i, h√£y c∆∞·ªùi l√™n ƒë·ªÉ nh·∫≠n may m·∫Øn nh√©)!",
            "B·∫°n nh·∫≠n ƒë∆∞·ª£c 1 c√°i √¥m tinh th·∫ßn t·ª´ l·ªõp 10/5!",
            "L·ªôc h√¥m nay: H√£y r·ªß ng∆∞·ªùi b√™n tr√°i b·∫°n ƒëi mua n∆∞·ªõc t·∫°i 10/5!",
            "B·∫°n l√† ng∆∞·ªùi tuy·ªát v·ªùi nh·∫•t h√¥m nay! ƒê√≥ ch√≠nh l√† m√≥n qu√† l·ªõn nh·∫•t."
        ];

        window.onload = () => {
            const saved = localStorage.getItem(storageKey);
            if (saved) showFinalResult(JSON.parse(saved), true);
        };

        function getZodiac(day, month) {
            const signs = ["Ma K·∫øt","B·∫£o B√¨nh","Song Ng∆∞","B·∫°ch D∆∞∆°ng","Kim Ng∆∞u","Song T·ª≠","C·ª± Gi·∫£i","S∆∞ T·ª≠","X·ª≠ N·ªØ","Thi√™n B√¨nh","B·ªç C·∫°p","Nh√¢n M√£"];
            const last_days = [19, 18, 20, 19, 20, 21, 22, 22, 22, 23, 22, 21];
            return day > last_days[month - 1] ? signs[month % 12] : signs[month - 1];
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            setTimeout(() => {
                document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
                const t = document.getElementById(id);
                t.style.display = 'block';
                setTimeout(() => t.classList.add('active'), 50);
            }, 500);
        }

        document.getElementById('confirm1').onclick = () => { audios.click.play(); showScreen('screen2'); };
        document.getElementById('confirm2').onclick = () => { audios.click.play(); showScreen('screen-birthdate'); };

        document.getElementById('cast').onclick = () => {
            if(!document.getElementById('birthdate').value) return alert("Vui l√≤ng nh·∫≠p ng√†y sinh!");
            audios.click.play(); showScreen('screen-jar');
            const jarWrapper = document.getElementById('jar-wrapper');
            jarWrapper.classList.add('shaking');
            audios.shake.play();

            setTimeout(() => {
                audios.shake.pause();
                jarWrapper.classList.remove('shaking');
                showScreen('screen-sticks');
                renderSticks();
            }, 3000);
        };

        function renderSticks() {
            const container = document.querySelector('.sticks-container');
            container.innerHTML = '';
            for(let i=0; i<6; i++) {
                const s = document.createElement('div');
                s.className = 'stick';
                s.onclick = () => {
                    audios.flip.play();
                    s.classList.add('selected');
                    document.querySelectorAll('.stick').forEach(el => el.classList.add('disabled'));
                    const birth = new Date(document.getElementById('birthdate').value);
                    const data = {
                        zodiac: getZodiac(birth.getDate(), birth.getMonth()+1),
                        fortune: fortunes[Math.floor(Math.random()*fortunes.length)],
                        lucky: Math.floor(Math.random()*99)+1,
                        quote: quotes[Math.floor(Math.random()*quotes.length)]
                    };
                    localStorage.setItem(storageKey, JSON.stringify(data));
                    setTimeout(() => showFinalResult(data), 1000);
                };
                container.appendChild(s);
            }
        }

        function showFinalResult(data, isOld = false) {
            document.getElementById('result-display').innerHTML = `
                <p style="color: #e67e22; font-weight: bold; margin-bottom: 5px;">‚ú® CUNG: ${data.zodiac.toUpperCase()} ‚ú®</p>
                <p style="font-size: 18px; line-height: 1.4; padding: 10px;">"${data.fortune}"</p>
                <p style="font-weight: bold; color: #c0392b;">S·ªê MAY M·∫ÆN: ${data.lucky}</p>
            `;
            document.getElementById('quote-display').innerText = data.quote;
            document.getElementById('result-modal').style.display = 'flex';
            if(!isOld) audios.win.play();
            confetti();
        }

        // T√çNH NƒÇNG M·ªöI: H·ªôp qu√† b√≠ ·∫©n
        document.getElementById('btn-mystery').onclick = () => {
            audios.gift.play();
            const gift = mysteryGifts[Math.floor(Math.random() * mysteryGifts.length)];
            alert("üéÅ QU√Ä T·ª™ V≈® TR·ª§ 10/5: \n\n" + gift);
        };

        document.getElementById('share-button').onclick = () => {
            const text = "Tui v·ª´a b√≥i qu·∫ª t·∫°i tr·∫°i 10/5! V·∫≠n m·ªánh: " + document.getElementById('result-display').innerText + " üëâ Qua 10/5 b√≥i ƒëi!";
            if (navigator.share) navigator.share({ title: 'B√≥i Qu·∫ª 10/5', text: text, url: window.location.href });
            else { navigator.clipboard.writeText(text); alert("ƒê√£ copy n·ªôi dung!"); }
        };

        function confetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            const pieces = [];
            for(let i=0; i<100; i++) pieces.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, c:`hsl(${Math.random()*360},100%,50%)`, s:Math.random()*3+2, a:Math.random()*6.28});
            function update() {
                ctx.clearRect(0,0,canvas.width,canvas.height);
                pieces.forEach(p => {
                    p.y += p.s; p.a += 0.05;
                    ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.a);
                    ctx.fillStyle = p.c; ctx.fillRect(-3,-3,6,6); ctx.restore();
                    if(p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(update);
            }
            update();
        }
    </script>
</body>
</html>

