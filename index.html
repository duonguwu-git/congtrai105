<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥i Qu·∫ª 10/5 - ƒê·ªìng B·ªô √Çm Thanh</title>
    <style>
        /* --- CSS GI·ªÆ NGUY√äN PHONG C√ÅCH X·ªäN X√í --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff5e6; color: #5d4037; 
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; text-align: center; padding: 20px; overflow: hidden;
        }
        .container {
            width: 100%; max-width: 450px; background: rgba(255, 245, 230, 0.95);
            border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 10;
        }
        h1 { color: #c0392b; font-size: 24px; margin-bottom: 15px; }
        button {
            background: #ffd700; color: #5d4037; border: none; padding: 15px;
            font-size: 18px; border-radius: 12px; cursor: pointer;
            margin: 10px 0; font-weight: bold; width: 100%; transition: 0.3s;
        }
        input[type="date"] { padding: 12px; font-size: 18px; border: 2px solid #c0392b; border-radius: 10px; width: 100%; margin: 15px 0; }
        
        .screen { display: none; opacity: 0; transition: 0.5s; }
        .active { display: block; opacity: 1; }

        /* Hi·ªáu ·ª©ng B√¨nh Qu·∫ª */
        #jar-container { position: relative; width: 180px; margin: 20px auto; cursor: pointer; }
        #jar {
            width: 150px; height: 220px; background: linear-gradient(#8b4513, #d2691e);
            border: 6px solid #5d4037; border-radius: 20px 20px 50px 50px; margin: 0 auto;
        }
        .shaking { animation: shake 0.1s infinite; }
        @keyframes shake { 0% {transform: rotate(0);} 25% {transform: rotate(-10deg);} 75% {transform: rotate(10deg);} }

        /* Hi·ªáu ·ª©ng √öm ba la */
        .mantra { position: absolute; color: #c0392b; font-weight: bold; opacity: 0; pointer-events: none; }
        .shaking .mantra { animation: fly 1s infinite linear; opacity: 1; }
        @keyframes fly { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 100% { transform: translateY(-120px) scale(1.2); opacity: 0; } }

        /* Th·∫ª qu·∫ª */
        .sticks-container { display: flex; justify-content: center; align-items: flex-end; height: 160px; margin: 20px 0; }
        .stick { width: 25px; height: 130px; background: #8b4513; margin: 0 6px; border-radius: 8px 8px 0 0; cursor: pointer; transition: 0.4s; position: relative; }
        .stick:hover { background: #a0522d; }
        .stick.selected { transform: translateY(-80px); background: #ffd700; border: 2px solid #c0392b; }
        .stick.disabled { opacity: 0.3; pointer-events: none; }

        /* Modal k·∫øt qu·∫£ */
        #result-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 99; padding: 20px;
        }
        #checkin-board { background: white; border: 5px solid #c0392b; border-radius: 20px; padding: 25px; width: 100%; max-width: 380px; }
        #special-timer { display: none; background: #ff4757; color: white; padding: 10px; border-radius: 8px; margin: 15px 0; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <div id="screen1" class="screen active">
            <h1>üîÆ XIN QU·∫∫ ƒê·∫¶U NƒÇM üîÆ</h1>
            <p>H√¥m nay b·∫°n mu·ªën xem ƒëi·ªÅu g√¨?</p>
            <button onclick="nextStep('screen2')">B·∫ÆT ƒê·∫¶U</button>
        </div>

        <div id="screen2" class="screen">
            <p>Vui l√≤ng ch·ªçn ng√†y sinh ƒë·ªÉ V≈© Tr·ª• k·∫øt n·ªëi:</p>
            <input type="date" id="birthdate">
            <button onclick="startCasting()">X√ÅC NH·∫¨N</button>
        </div>

        <div id="screen-jar" class="screen">
            <div id="jar-container" onclick="handleShake()">
                <div class="mantra" style="left: 10px;">√öm ma ni...</div>
                <div class="mantra" style="right: 10px;">B√°t di h·ªìng...</div>
                <div id="jar"></div>
            </div>
            <p><b>CH·∫†M V√ÄO B√åNH ƒê·ªÇ X√ìC QU·∫∫</b></p>
        </div>

        <div id="screen-sticks" class="screen">
            <p>Ch·∫°m v√†o 1 th·∫ª ƒë·ªÉ r√∫t qu·∫ª:</p>
            <div class="sticks-container" id="sticks"></div>
        </div>
    </div>

    <div id="result-modal">
        <div id="checkin-board">
            <h2 style="color: #c0392b">üìú TH√ÅNH QU·∫∫ CH·ªà D·∫™N</h2>
            <div id="fortune-text" style="margin: 20px 0; line-height: 1.6;"></div>
            
            <div id="special-timer">‚è≥ H·∫†N D√ôNG: <span id="timer">15:00</span></div>
            
            <div id="gift-area" style="background: #fff5e6; padding: 15px; border-radius: 10px; border: 2px dashed #c0392b; font-weight: bold;">
                B·∫•m n√∫t d∆∞·ªõi ƒë·ªÉ nh·∫≠n qu√†...
            </div>
            
            <button id="gift-btn" onclick="revealGift()" style="background: #c0392b; color: white; margin-top: 20px;">üéÅ NH·∫¨N L·ªòC MAY M·∫ÆN</button>
            <p style="font-size: 12px; margin-top: 10px; color: #777;">Ch·ª•p m√†n h√¨nh ƒë∆∞a cho nh√¢n vi√™n 10/5 nh√©!</p>
        </div>
    </div>

    <script>
        // --- C·∫§U H√åNH √ÇM THANH ---
        const sfx = {
            click: new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'),
            shake: new Audio('https://assets.mixkit.co/active_storage/sfx/1074/1074-preview.mp3'),
            swipe: new Audio('https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'),
            win: new Audio('https://assets.mixkit.co/active_storage/sfx/2017/2017-preview.mp3')
        };

        let isAlreadyPlayed = false;

        function nextStep(id) {
            sfx.click.play();
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            setTimeout(() => {
                document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
                document.getElementById(id).style.display = 'block';
                setTimeout(() => document.getElementById(id).classList.add('active'), 50);
            }, 400);
        }

        function startCasting() {
            if(!document.getElementById('birthdate').value) return alert("Vui l√≤ng ch·ªçn ng√†y sinh!");
            nextStep('screen-jar');
        }

        // --- X·ª¨ L√ù X√ìC QU·∫∫ (ƒê·ªíNG B·ªò √ÇM THANH) ---
        function handleShake() {
            const jar = document.getElementById('jar-container');
            if(jar.classList.contains('shaking')) return;

            // PH√ÅT √ÇM THANH NGAY KHI B·∫§M
            sfx.shake.currentTime = 0;
            sfx.shake.loop = true;
            sfx.shake.play();
            
            jar.classList.add('shaking');

            // Sau 2.5 gi√¢y d·ª´ng l·∫°i
            setTimeout(() => {
                sfx.shake.pause();
                jar.classList.remove('shaking');
                nextStep('screen-sticks');
                renderSticks();
            }, 2500);
        }

        function renderSticks() {
            const container = document.getElementById('sticks');
            container.innerHTML = '';
            for(let i=0; i<5; i++) {
                const s = document.createElement('div');
                s.className = 'stick';
                s.onclick = function() {
                    // √ÇM THANH XO·∫∏T KHI R√öT
                    sfx.swipe.play();
                    this.classList.add('selected');
                    document.querySelectorAll('.stick').forEach(el => { if(el!==this) el.classList.add('disabled')});
                    
                    setTimeout(showFinalResult, 800);
                };
                container.appendChild(s);
            }
        }

        // --- QU√Ä MARKETING ---
        const gifts = [
            "L·ªòC ƒê·∫†I C√ÅT: MI·ªÑN PH√ç 1 LY (Khi mua k√®m 1 ly b·∫•t k·ª≥)",
            "L·ªòC TI·∫æN B·∫¢O: GI·∫¢M NGAY 5.000ƒë v√†o h√≥a ƒë∆°n",
            "L·ªòC THANH XU√ÇN: T·∫∂NG 1 TOPPING TR√ÇN CH√ÇU/TH·∫†CH",
            "L·ªòC H·ªà: VOUCHER GI·∫¢M 10% CHO L·∫¶N MUA SAU",
            "L·ªòC B√åNH AN: T·∫∂NG 1 PH·∫¶N QU√Ä NH·ªé T·∫†I QU·∫¶Y"
        ];

        function showFinalResult() {
            const fortunes = [
                "V·∫≠n th·∫ø ƒëang l√™n, c√¥ng vi·ªác thu·∫≠n l·ª£i, t√¨nh duy√™n ph∆°i ph·ªõi!",
                "Qu√Ω nh√¢n ph√π tr·ª£, kh√≥ khƒÉn s·ªõm qua, t√†i l·ªôc ƒëang g√µ c·ª≠a.",
                "S·ª©c kh·ªèe d·ªìi d√†o, ni·ªÅm vui b·∫•t ng·ªù t·ª´ nh·ªØng ng∆∞·ªùi b·∫°n m·ªõi.",
                "C·∫©n th·∫≠n chi ti√™u, t√≠ch l≈©y h√¥m nay, gi√†u sang mai sau."
            ];
            
            document.getElementById('fortune-text').innerText = fortunes[Math.floor(Math.random()*fortunes.length)];
            document.getElementById('result-modal').style.display = 'flex';
        }

        function revealGift() {
            sfx.win.play();
            const giftArea = document.getElementById('gift-area');
            const randomGift = gifts[Math.floor(Math.random()*gifts.length)];
            giftArea.innerHTML = "üéÅ " + randomGift;
            giftArea.style.color = "#c0392b";
            document.getElementById('gift-btn').style.display = 'none';
            
            // Ch·∫°y ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c 15 ph√∫t
            startTimer();
        }

        function startTimer() {
            document.getElementById('special-timer').style.display = 'block';
            let time = 900;
            const timerEl = document.getElementById('timer');
            const countdown = setInterval(() => {
                let m = Math.floor(time / 60);
                let s = time % 60;
                timerEl.innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
                if (time-- <= 0) clearInterval(countdown);
            }, 1000);
        }
    </script>
</body>
</html>
